<!DOCTYPE html>

<html data-bs-theme="light" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="None" name="description"/>
<link href="img/favicon.ico" rel="shortcut icon"/>
<title>cli-proxy</title>
<link href="css/bootstrap.min.css" rel="stylesheet"/>
<link href="css/fontawesome.min.css" rel="stylesheet"/>
<link href="css/brands.min.css" rel="stylesheet"/>
<link href="css/solid.min.css" rel="stylesheet"/>
<link href="css/v4-font-face.min.css" rel="stylesheet"/>
<link href="css/base.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" id="hljs-light" rel="stylesheet"/>
<link disabled="" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" id="hljs-dark" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body class="homepage">
<div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
<div class="container">
<a class="navbar-brand" href="index.html">cli-proxy</a>
<!-- Expander button -->
<button aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbar-collapse" data-bs-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse" id="navbar-collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li class="nav-item">
<a aria-current="page" class="nav-link active" href="index.html">Главная</a>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button">Обзор</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="overview.html">Обзор проекта</a>
</li>
</ul>
</li>
<li class="nav-item">
<a class="nav-link" href="architecture.html">Архитектура</a>
</li>
<li class="nav-item">
<a class="nav-link" href="runtime.html">Запуск</a>
</li>
<li class="nav-item">
<a class="nav-link" href="dependencies.html">Зависимости</a>
</li>
<li class="nav-item">
<a class="nav-link" href="testing.html">Тестирование</a>
</li>
<li class="nav-item">
<a class="nav-link" href="conventions.html">Соглашения</a>
</li>
<li class="nav-item">
<a class="nav-link" href="glossary.html">Глоссарий</a>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button">Конфигурация проекта</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="configs/index.html">Обзор</a>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">/agent</a>
<ul class="dropdown-menu">
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">/approvals</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="configs/files/agent/approvals/blocked-patterns__json.html">blocked-patterns.json</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a class="dropdown-item" href="configs/files/config_example__yaml.html">config_example.yaml</a>
</li>
<li>
<a class="dropdown-item" href="configs/files/toolhelp__json.html">toolhelp.json</a>
</li>
</ul>
</li>
<li class="nav-item dropdown">
<a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button">Модули</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="modules/index.html">Обзор</a>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">/agent</a>
<ul class="dropdown-menu">
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">/mcp</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="modules/agent/mcp/__init____py.html">__init__.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/mcp/http_client__py.html">http_client.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/mcp/jsonrpc__py.html">jsonrpc.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/mcp/manager__py.html">manager.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/mcp/stdio_client__py.html">stdio_client.py</a>
</li>
</ul>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">/plugins</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="modules/agent/plugins/__init____py.html">__init__.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/ask_user__py.html">ask_user.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/auto_tts__py.html">auto_tts.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/base__py.html">base.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/chief__py.html">chief.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/codeinterpreter__py.html">codeinterpreter.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/ddg_image_search__py.html">ddg_image_search.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/delete_file__py.html">delete_file.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/edit_file__py.html">edit_file.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/fetch_page__py.html">fetch_page.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/github_analysis__py.html">github_analysis.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/gtts_text_to_speech__py.html">gtts_text_to_speech.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/haiper_image_to_video__py.html">haiper_image_to_video.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/list_directory__py.html">list_directory.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/manage_message__py.html">manage_message.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/manage_tasks__py.html">manage_tasks.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/memory__py.html">memory.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/movie_info__py.html">movie_info.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/prompt_perfect__py.html">prompt_perfect.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/read_file__py.html">read_file.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/reminders__py.html">reminders.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/run_command__py.html">run_command.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/schedule_task__py.html">schedule_task.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/search_files__py.html">search_files.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/search_text__py.html">search_text.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/search_web__py.html">search_web.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/send_file__py.html">send_file.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/show_me_diagrams__py.html">show_me_diagrams.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/stable_diffusion__py.html">stable_diffusion.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/task_management__py.html">task_management.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/text_document_qa__py.html">text_document_qa.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/use_cli__py.html">use_cli.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/web_research__py.html">web_research.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/website_content__py.html">website_content.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/wolfram_alpha__py.html">wolfram_alpha.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/write_file__py.html">write_file.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/plugins/youtube_transcript__py.html">youtube_transcript.py</a>
</li>
</ul>
</li>
<li class="dropdown-submenu">
<a class="dropdown-item" href="#">/tooling</a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="modules/agent/tooling/__init____py.html">__init__.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/tooling/constants__py.html">constants.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/tooling/helpers__py.html">helpers.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/tooling/loader__py.html">loader.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/tooling/mcp_plugin__py.html">mcp_plugin.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/tooling/registry__py.html">registry.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/tooling/spec__py.html">spec.py</a>
</li>
</ul>
</li>
<li>
<a class="dropdown-item" href="modules/agent/__init____py.html">__init__.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/agent_core__py.html">agent_core.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/contracts__py.html">contracts.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/dispatcher__py.html">dispatcher.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/executor__py.html">executor.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/heuristics__py.html">heuristics.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/manager__py.html">manager.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/manager_prompts__py.html">manager_prompts.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/manager_store__py.html">manager_store.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/memory_policy__py.html">memory_policy.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/memory_store__py.html">memory_store.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/openai_client__py.html">openai_client.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/orchestrator__py.html">orchestrator.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/planner__py.html">planner.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/profiles__py.html">profiles.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/agent/session_store__py.html">session_store.py</a>
</li>
</ul>
</li>
<li>
<a class="dropdown-item" href="modules/bot__py.html">bot.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/bot_logging__py.html">bot_logging.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/command_registry__py.html">command_registry.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/config__py.html">config.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/dirs_ui__py.html">dirs_ui.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/dotenv_loader__py.html">dotenv_loader.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/git_ops__py.html">git_ops.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/mcp_bridge__py.html">mcp_bridge.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/metrics__py.html">metrics.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/session__py.html">session.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/session_ui__py.html">session_ui.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/state__py.html">state.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/summary__py.html">summary.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/telegram_io__py.html">telegram_io.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/tg_markdown__py.html">tg_markdown.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/toolhelp__py.html">toolhelp.py</a>
</li>
<li>
<a class="dropdown-item" href="modules/utils__py.html">utils.py</a>
</li>
</ul>
</li>
<li class="nav-item">
<a class="nav-link" href="changes.html">Изменения</a>
</li>
</ul>
<ul class="nav navbar-nav ms-md-auto">
<li class="nav-item">
<a class="nav-link" data-bs-target="#mkdocs_search_modal" data-bs-toggle="modal" href="#">
<i class="fa fa-search"></i> Search
                            </a>
</li>
<li class="nav-item">
<a class="nav-link disabled" rel="prev">
<i class="fa fa-arrow-left"></i> Previous
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="overview.html" rel="next">
                                    Next <i class="fa fa-arrow-right"></i>
</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
<div class="navbar-header">
<button class="navbar-toggler collapsed" data-bs-target="#toc-collapse" data-bs-toggle="collapse" title="Table of Contents" type="button">
<span class="fa fa-angle-down"></span>
</button>
</div>
<div class="navbar-collapse collapse card bg-body-tertiary" id="toc-collapse">
<ul class="nav flex-column">
<li class="nav-item" data-bs-level="1"><a class="nav-link" href="#_1">Документация проекта</a>
<ul class="nav flex-column">
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_2">Обзор</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_4">Архитектура</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_5">Работа с сессиями</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_6">Режимы работы</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_7">Конфигурация</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#git-">Git-интеграция</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_10">Обработка вложений</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_11">Команды</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#_15">Восстановление состояния</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-bs-level="2"><a class="nav-link" href="#yolo">Автоодобрение (YOLO)</a>
<ul class="nav flex-column">
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div></div>
<div class="col-md-9" role="main">
<h1 id="_1">Документация проекта</h1>
<h2 id="_2">Обзор</h2>
<p>CLI Proxy Telegram Bridge — это Telegram-бот, преобразующий CLI-инструменты (Codex, Gemini, Qwen, Claude и др.) в управляемые, визуализированные и автоматизированные процессы. Проект обеспечивает масштабируемое многопользовательское взаимодействие с агентами через Telegram, включая оркестрацию задач, Git-интеграцию и работу с файлами.</p>
<h3 id="_3">Ключевые возможности</h3>
<ul>
<li><strong>Многопользовательские сессии</strong>: изолированные контексты выполнения с сохранением состояния в <code>state.json</code>.</li>
<li><strong>Очередь команд</strong>: управление параллельными задачами, предотвращение конфликтов.</li>
<li><strong>HTML-вывод</strong>: отображение результатов с поддержкой Markdown, ANSI-цветов и mermaid-диаграмм.</li>
<li><strong>Git-интеграция</strong>: inline-меню для операций <code>status</code>, <code>commit</code>, <code>push</code>, <code>merge</code>, <code>rebase</code>, <code>diff</code>.</li>
<li><strong>Файловый доступ</strong>: просмотр и отправка файлов через <code>/files</code>.</li>
<li><strong>Режимы работы</strong>: <code>Agent</code> (ReAct-агент) и <code>Manager</code> (мультиагентная оркестрация).</li>
</ul>
<h2 id="_4">Архитектура</h2>
<p>Проект построен на модульной архитектуре с четким разделением ответственности:</p>
<ul>
<li><strong><code>SessionManager</code></strong>: управление жизненным циклом сессий, включая создание, активацию и сохранение состояния.</li>
<li><strong><code>SessionUI</code></strong>: интерфейс для управления сессиями через Telegram-кнопки.</li>
<li><strong><code>GitOps</code></strong>: выполнение Git-операций с интерактивным подтверждением.</li>
<li><strong><code>ManagerOrchestrator</code></strong>: оркестрация мультиагентной разработки, включая декомпозицию задач и ревью.</li>
<li><strong><code>ToolRegistry</code></strong>: централизованное управление инструментами и плагинами.</li>
<li><strong><code>MCPBridge</code></strong>: TCP-мост для взаимодействия с внешними клиентами.</li>
</ul>
<h2 id="_5">Работа с сессиями</h2>
<h3 id="telegram">Управление через Telegram</h3>
<p>Сессии управляются через команды и inline-меню:</p>
<ul>
<li><code>/new</code> — создать новую сессию.</li>
<li><code>/sessions</code> — открыть меню управления сессиями.</li>
<li><code>/use &lt;id&gt;</code> — активировать сессию.</li>
<li><code>/close</code> — закрыть активную сессию.</li>
</ul>
<h3 id="sessionui">Интерфейс <code>SessionUI</code></h3>
<p>Класс <code>SessionUI</code> предоставляет интерактивный интерфейс для управления сессиями:</p>
<ul>
<li><strong>Выбор сессии</strong>: отображает список доступных сессий с кнопками.</li>
<li><strong>Действия</strong>:</li>
<li><code>sess_use</code> — активация сессии.</li>
<li><code>sess_status</code> — просмотр состояния (время работы, очередь, занятость).</li>
<li><code>sess_rename</code> — переименование сессии (ожидает ввода).</li>
<li><code>sess_resume</code> — установка resume-токена (ожидает ввода).</li>
<li><code>sess_clearqueue</code> — очистка очереди команд.</li>
<li><code>sess_state</code> — просмотр текущего состояния.</li>
<li><code>sess_close</code> — закрытие сессии.</li>
</ul>
<p>Изменения сохраняются автоматически через <code>manager._persist_sessions()</code>.</p>
<h2 id="_6">Режимы работы</h2>
<h3 id="agent-">Agent-режим</h3>
<ul>
<li>Активируется командой <code>/agent</code>.</li>
<li>Реализует архитектуру ReAct (Reasoning + Acting).</li>
<li>Поддерживает диалог, память и циклическое выполнение действий.</li>
<li>Ограничен одной сессией.</li>
</ul>
<h3 id="manager-">Manager-режим</h3>
<ul>
<li>Активируется командой <code>/manager</code>.</li>
<li>Оркестрирует мультиагентную разработку: декомпозиция задачи, выполнение, ревью, финальный отчет.</li>
<li>Поддерживает автокоммит в Git при успехе (<code>manager_auto_commit=true</code>).</li>
<li>План сохраняется в <code>MANAGER_PLAN.json</code>.</li>
</ul>
<h2 id="_7">Конфигурация</h2>
<p>Основной файл настройки — <code>config.yaml</code>. Поддерживает подстановку переменных окружения через <code>${VAR}</code>.</p>
<h3 id="_8">Ключевые параметры</h3>
<div class="highlight"><pre><span></span><code><span class="nt">telegram</span><span class="p">:</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="s">"YOUR_TELEGRAM_BOT_TOKEN"</span>
<span class="w">  </span><span class="nt">whitelist_chat_ids</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">123456789</span><span class="p p-Indicator">]</span>

<span class="nt">defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workdir</span><span class="p">:</span><span class="w"> </span><span class="s">"/path/to/working/directory"</span>
<span class="w">  </span><span class="nt">log_path</span><span class="p">:</span><span class="w"> </span><span class="s">"/path/to/logs/bot.log"</span>
<span class="w">  </span><span class="nt">image_temp_dir</span><span class="p">:</span><span class="w"> </span><span class="s">"/tmp/images"</span>

<span class="nt">tools</span><span class="p">:</span>
<span class="w">  </span><span class="nt">codex</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cmd</span><span class="p">:</span><span class="w"> </span><span class="s">"codex</span><span class="nv"> </span><span class="s">--prompt</span><span class="nv"> </span><span class="s">{prompt}"</span>
<span class="w">    </span><span class="nt">resume_cmd</span><span class="p">:</span><span class="w"> </span><span class="s">"codex</span><span class="nv"> </span><span class="s">--resume</span><span class="nv"> </span><span class="s">{resume}"</span>
<span class="w">    </span><span class="nt">prompt_regex</span><span class="p">:</span><span class="w"> </span><span class="s">".*&gt;"</span>
<span class="w">    </span><span class="nt">resume_regex</span><span class="p">:</span><span class="w"> </span><span class="s">"thread_id:</span><span class="nv"> </span><span class="s">([a-f0-9-]+)"</span>

<span class="nt">manager_max_tasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="nt">manager_max_attempts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">manager_decompose_timeout_sec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="nt">manager_dev_timeout_sec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600</span>
<span class="nt">manager_auto_resume</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">manager_auto_commit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h2 id="git-">Git-интеграция</h2>
<p>Git-бот позволяет выполнять основные операции без знания CLI:</p>
<ul>
<li><strong>Просмотр состояния</strong>: <code>Status</code>, <code>Log</code>, <code>Diff</code>, <code>Summary</code>.</li>
<li><strong>Синхронизация</strong>: <code>Fetch</code>, <code>Pull</code> (с <code>--ff-only</code>).</li>
<li><strong>Коммиты и отправка</strong>: <code>Commit</code>, <code>Push</code>.</li>
<li><strong>Слияние веток</strong>: <code>Merge</code>, <code>Rebase</code>.</li>
<li><strong>Работа с конфликтами</strong>: отображение конфликтующих файлов, кнопки <code>Abort</code>, <code>Continue</code>.</li>
</ul>
<h3 id="_9">Настройка</h3>
<p>Для приватных репозиториев укажите токен в <code>config.yaml</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">github_token</span><span class="p">:</span><span class="w"> </span><span class="s">"YOUR_GITHUB_TOKEN"</span>
</code></pre></div>
<h2 id="_10">Обработка вложений</h2>
<ul>
<li><strong>Текстовые файлы</strong> (до 500 КБ): объединяются с подписью и передаются в CLI.</li>
<li><strong>Изображения</strong>: обрабатываются при наличии <code>image_cmd</code>, текст берётся из подписи.</li>
</ul>
<h2 id="_11">Команды</h2>
<h3 id="_12">Видимые в меню</h3>
<ul>
<li><code>/new</code>, <code>/sessions</code>, <code>/git</code>, <code>/files</code>, <code>/agent</code>, <code>/manager</code>, <code>/tools</code>, <code>/toolhelp</code></li>
</ul>
<h3 id="_13">Скрытые</h3>
<ul>
<li><code>/dirs</code>, <code>/newpath</code>, <code>/use</code>, <code>/cwd</code>, <code>/setprompt</code>, <code>/send</code>, <code>/resume</code>, <code>/close</code>, <code>/status</code>, <code>/rename</code>, <code>/state</code>, <code>/clearqueue</code>, <code>/queue</code>, <code>/preset</code>, <code>/metrics</code></li>
</ul>
<h3 id="_14">Прямой ввод</h3>
<ul>
<li>Через <code>/send</code> или с префиксом <code>&gt;</code>.</li>
</ul>
<h2 id="_15">Восстановление состояния</h2>
<p>После перезапуска бот восстанавливает:
- Активные сессии из <code>state.json</code>.
- Очередь задач.
- Состояние <code>toolhelp.json</code>.</p>
<h2 id="yolo">Автоодобрение (YOLO)</h2>
<p>Активируется флагами:
- Gemini: <code>--approval-mode yolo</code>
- Qwen: <code>--yolo</code>
- Claude: <code>--dangerously-skip-permissions</code>
- Codex: <code>/approvals full</code> в чате.</p></div>
</div>
</div>
<footer class="col-md-12">
<hr/>
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
</footer>
<script src="js/bootstrap.bundle.min.js"></script>
<script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
<script src="js/base.js"></script>
<script src="search/main.js"></script>
<div aria-hidden="true" aria-labelledby="searchModalLabel" class="modal" id="mkdocs_search_modal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="searchModalLabel">Search</h4>
<button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<div class="modal-body">
<p>From here you can search these documents. Enter your search terms below.</p>
<form>
<div class="form-group">
<input class="form-control" id="mkdocs-search-query" placeholder="Search..." title="Type search term here" type="search"/>
</div>
</form>
<div data-no-results-text="No results found" id="mkdocs-search-results"></div>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div><div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
</body>
</html>
<!--
MkDocs version : 1.6.1
Build Date UTC : 2026-02-07 10:55:00.176788+00:00
-->
