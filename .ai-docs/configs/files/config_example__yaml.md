# config_example.yaml

Конфигурационный файл задаёт параметры работы Telegram-бота для взаимодействия с различными языковыми моделями. Включает настройки аутентификации, команды запуска инструментов, переменные окружения, пути к файлам, поведение бота и поддержку нескольких LLM-провайдеров. Поддерживается интеграция с внешними MCP-серверами и использование пресетов для упрощения запуска типовых задач.

Секции и ключи

telegram — настройки интеграции с Telegram, включая токен бота и список разрешённых chat_id<br>
telegram.token — токен Telegram-бота для авторизации через Bot API<br>
telegram.whitelist_chat_ids — список идентификаторов чатов, которым разрешено использовать бота<br>
tools — конфигурация инструментов для взаимодействия с различными LLM<br>
tools.codex — параметры инструмента Codex, включая команды, режим работы и переменные окружения<br>
tools.claude — параметры инструмента Claude, включая команды и переменные окружения<br>
tools.gemini — параметры инструмента Gemini, включая команды и переменные окружения<br>
tools.qwen — параметры инструмента Qwen, включая команды и переменные окружения<br>
tools.<имя>.mode — режим работы инструмента (например, headless)<br>
tools.<имя>.cmd — команда для запуска инструмента с подстановкой параметров<br>
tools.<имя>.interactive_cmd — команда для запуска интерактивного режима<br>
tools.<имя>.resume_cmd — команда с подстановкой для возобновления сессии<br>
tools.<имя>.image_cmd — шаблон команды для обработки изображений<br>
tools.<имя>.resume_regex — регулярное выражение для извлечения thread_id из вывода<br>
tools.<имя>.help_cmd — команда, отправляемая инструменту для получения справки<br>
tools.<имя>.auto_commands — список команд, автоматически отправляемых при старте<br>
tools.<имя>.env — переменные окружения, передаваемые инструменту<br>
defaults — значения по умолчанию для различных параметров системы<br>
defaults.workdir — рабочая директория по умолчанию для выполнения команд<br>
defaults.idle_timeout_sec — таймаут бездействия в секундах перед остановкой сессии<br>
defaults.summary_max_chars — максимальное количество символов в сводке выполнения<br>
defaults.html_filename_prefix — префикс имени файла для сохранения HTML-вывода<br>
defaults.state_path — путь к файлу сохранения состояния сессии<br>
defaults.toolhelp_path — путь к файлу с описанием инструментов<br>
defaults.openai_api_key — ключ API для OpenAI (если не задан, используется null)<br>
defaults.openai_model — модель OpenAI по умолчанию<br>
defaults.openai_base_url — базовый URL для API OpenAI<br>
defaults.big_model_to_use — модель, используемая для сложных задач<br>
defaults.zai_api_key — ключ API для Zai<br>
defaults.tavily_api_key — ключ API для Tavily<br>
defaults.jina_api_key — ключ API для Jina<br>
defaults.github_token — токен для доступа к GitHub<br>
defaults.log_path — путь к файлу логов<br>
defaults.image_temp_dir — временная директория для хранения изображений<br>
defaults.image_max_mb — максимальный размер изображения в мегабайтах<br>
defaults.memory_max_kb — максимальный объём памяти для хранения контекста в КБ<br>
defaults.memory_compact_target_kb — целевой объём памяти после компрессии в КБ<br>
defaults.clarification_enabled — включена ли функция уточнения запросов<br>
defaults.clarification_keywords — список ключевых слов, при которых бот запрашивает уточнение<br>
mcp — настройки встроенного MCP-сервера<br>
mcp.enabled — включён ли MCP-сервер<br>
mcp.host — хост, на котором запускается MCP-сервер<br>
mcp.port — порт MCP-сервера<br>
mcp.token — токен для аутентификации на MCP-сервере<br>
mcp_clients — список внешних MCP-клиентов, подключаемых через stdio<br>
mcp_clients.name — имя MCP-клиента<br>
mcp_clients.enabled — включён ли клиент<br>
mcp_clients.transport — тип транспорта (например, stdio)<br>
mcp_clients.cmd — команда для запуска клиента<br>
mcp_clients.cwd — рабочая директория клиента<br>
mcp_clients.env — переменные окружения для клиента<br>
mcp_clients.timeout_ms — таймаут ожидания ответа от клиента в миллисекундах<br>
mcp_servers — список внешних MCP-серверов, доступных по HTTP<br>
mcp_servers.<имя>.url — URL MCP-сервера<br>
presets — список пресетов команд, доступных для быстрого запуска<br>
presets.name — имя пресета<br>
presets.prompt — текст запроса, отправляемый при активации пресета

Важные параметры

telegram.token — обязательный параметр для подключения бота к Telegram<br>
tools.codex.resume_regex — критически важен для извлечения идентификатора сессии из вывода Codex<br>
defaults.workdir — определяет рабочую директорию, где будут выполняться все команды<br>
defaults.clarification_enabled — управляет поведением бота при неоднозначных запросах<br>
mcp.enabled — включение этой опции позволяет подключать внешние MCP-инструменты<br>
mcp_servers — позволяет интегрировать сторонние серверы без запуска локальных процессов<br>
presets — ускоряют выполнение типовых задач через предопределённые команды
