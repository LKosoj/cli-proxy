# command_registry

Модуль предоставляет функцию регистрации команд для Telegram-бота, формируя список команд с их описаниями, обработчиками и флагами отображения в меню.  
Каждая команда представлена словарём, содержащим метаданные, используемые при построении интерфейса и маршрутизации запросов.  
Функция зависит от экземпляра приложения бота, предоставляющего методы-обработчики команд.

Ключевые структуры данных  
Dict[str, object] — Описание команды с полями: `name` (имя команды), `desc` (описание), `handler` (функция-обработчик), `menu` (флаг отображения в меню)  
List[Dict[str, object]] — Список зарегистрированных команд

build_command_registry(bot_app) -> List[Dict[str, object]]  
Формирует список зарегистрированных команд бота с их метаданными.  
Аргументы  
bot_app — Экземпляр приложения бота, содержащий методы-обработчики команд  
Возвращает  
Список словарей, описывающих команды: имя, описание, обработчик и признак отображения в меню  
Исключения  
Отсутствуют

---
class bot_app  
Экземпляр приложения Telegram-бота, предоставляющий обработчики команд.  
Методы  
cmd_new — Обработчик команды создания новой сессии  
cmd_sessions — Обработчик команды открытия меню управления сессиями  
cmd_interrupt — Обработчик команды прерывания текущей генерации  
cmd_git — Обработчик команды выполнения Git-операций по активной сессии  
cmd_files — Обработчик команды отправки файла из рабочей директории  
cmd_agent — Обработчик команды включения/выключения агента  
cmd_manager — Обработчик команды перехода в режим менеджера проекта  
cmd_preset — Обработчик команды отображения шаблонов задач для CLI  
cmd_metrics — Обработчик команды отображения метрик бота  
cmd_tools — Обработчик команды отображения доступных инструментов  
cmd_toolhelp — Обработчик команды отображения команд выбранного инструмента  
cmd_newpath — Обработчик команды задания пути для новой сессии после выбора инструмента  
cmd_use — Обработчик команды выбора активной сессии  
cmd_close — Обработчик команды закрытия сессии  
cmd_status — Обработчик команды отображения статуса активной сессии  
cmd_queue — Обработчик команды отображения очереди  
cmd_clearqueue — Обработчик команды очистки очереди активной сессии  
cmd_rename — Обработчик команды переименования сессии  
cmd_cwd — Обработчик команды создания новой сессии в другом каталоге  
cmd_dirs — Обработчик команды просмотра каталогов  
cmd_resume — Обработчик команды установки или отображения resume-токена  
cmd_state — Обработчик команды просмотра состояния  
cmd_setprompt — Обработчик команды установки prompt_regex для инструмента  
cmd_send — Обработчик команды отправки текста напрямую в CLI
