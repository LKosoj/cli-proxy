# agent/mcp/__init__

Модуль обеспечивает интеграцию с внешними инструментальными серверами через протокол MCP (Model Communication Protocol). Позволяет обнаруживать, подключаться к MCP-серверам и выполнять вызовы инструментов (tools) в синхронном и асинхронном режимах. Поддерживает динамическое получение манифеста инструментов и валидацию входных/выходных данных согласно схемам.

Ключевые структуры данных  
MCPToolCall — Описывает вызов инструмента с именем, параметрами и идентификатором.  
MCPManifest — Хранит информацию о доступных инструментах, их описаниях и схемах ввода-вывода.

---
MCPClient.connect(url: str) -> None  
Инициализирует соединение с MCP-сервером по указанному URL.  
Аргументы  
url — Адрес MCP-сервера (например, http://localhost:8080)  
Исключения  
ConnectionError — При невозможности установить соединение с сервером  
TimeoutError — Если превышено время ожидания подключения

---
MCPClient.get_manifest() -> MCPManifest  
Возвращает манифест доступных инструментов с их описаниями и схемами.  
Возвращает  
Объект MCPManifest, содержащий список инструментов и их метаданные  
Исключения  
RuntimeError — Если соединение с сервером не установлено

---
MCPClient.call_tool(tool_name: str, arguments: dict) -> dict  
Синхронно вызывает указанный инструмент с заданными аргументами.  
Аргументы  
tool_name — Имя вызываемого инструмента (должно быть в манифесте)  
arguments — Параметры вызова, соответствующие схеме инструмента  
Возвращает  
Результат выполнения инструмента в виде словаря  
Исключения  
ValueError — Если инструмент не найден или аргументы не прошли валидацию  
RuntimeError — Если произошла ошибка при выполнении инструмента на сервере

---
MCPClient.disconnect() -> None  
Закрывает соединение с MCP-сервером.  
Исключения  
RuntimeError — Если клиент не был подключён

---
class MCPToolCall  
Описывает вызов инструмента в рамках протокола MCP.  
Поля  
tool_name — Имя вызываемого инструмента  
arguments — Аргументы вызова в формате словаря  
call_id — Уникальный идентификатор вызова

---
class MCPManifest  
Хранит метаданные о доступных инструментах MCP-сервера.  
Поля  
tools — Список словарей с описанием инструментов, включая имя, описание, схему входных и выходных данных  
version — Версия манифеста  
server_info — Информация о сервере (имя, версия, поддерживаемые протоколы)
