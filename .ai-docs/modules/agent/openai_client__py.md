# agent/openai_client

Модуль предоставляет асинхронные функции для взаимодействия с OpenAI API с использованием конфигурации приложения.  
Он позволяет создавать клиент, настроенный по данным из `AppConfig`, и выполнять запросы к модели чата.  
Если ключ API или модель не указаны в конфигурации, функции возвращают пустой результат.

Ключевые структуры данных  
AppConfig — Конфигурация приложения, содержащая настройки по умолчанию, включая параметры OpenAI.

get_openai_config(config: AppConfig) -> Optional[Tuple[str, str, str]]  
Возвращает кортеж с ключом API, моделью и базовым URL для OpenAI или None, если данные неполные.  
Аргументы  
config — Объект конфигурации приложения  
Возвращает  
Кортеж (api_key, model, base_url) или None, если api_key или model не заданы  
Исключения  
Не выбрасывает исключения

---  
build_client(config: AppConfig) -> Optional[Tuple[AsyncOpenAI, str]]  
Создаёт асинхронного клиента OpenAI и возвращает его вместе с именем модели.  
Аргументы  
config — Объект конфигурации приложения  
Возвращает  
Кортеж (AsyncOpenAI, model) или None, если не удалось получить настройки  
Исключения  
Не выбрасывает исключения

---  
async chat_completion(config: AppConfig, system: str, user: str) -> str  
Выполняет запрос к модели чата OpenAI с системным и пользовательским сообщением.  
Аргументы  
config — Объект конфигурации приложения  
system — Системное сообщение (указание поведения модели)  
user — Пользовательский запрос  
Возвращает  
Ответ модели в виде строки, либо пустая строка при ошибке или отсутствии данных  
Исключения  
Может выбросить исключение от OpenAI API (например, AuthenticationError, APIConnectionError и др.)
