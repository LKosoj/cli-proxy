# agent/openai_client

Модуль предоставляет асинхронные функции для взаимодействия с OpenAI API на основе конфигурации приложения.  
Он позволяет получать параметры подключения, создавать клиент и выполнять запросы к модели чата.  
Все функции учитывают наличие необходимых ключей и параметров, возвращая `None` или пустой результат при их отсутствии.

Ключевые структуры данных  
AppConfig — Конфигурация приложения, содержащая настройки по умолчанию, включая ключ API, модель и базовый URL для OpenAI.

get_openai_config(config: AppConfig) -> Optional[Tuple[str, str, str]]  
Возвращает кортеж с ключом API, моделью и базовым URL для OpenAI или None, если параметры неполные.  
Аргументы  
config — Объект конфигурации приложения  
Возвращает  
Кортеж (api_key, model, base_url) или None, если api_key или model не заданы  
Исключения  
Нет

---  
build_client(config: AppConfig) -> Optional[Tuple[AsyncOpenAI, str]]  
Создаёт асинхронного клиента OpenAI и возвращает его вместе с именем модели или None при ошибке конфигурации.  
Аргументы  
config — Объект конфигурации приложения  
Возвращает  
Кортеж (AsyncOpenAI, model) или None, если клиент не может быть создан  
Исключения  
Нет

---  
chat_completion(config: AppConfig, system: str, user: str, response_format = None) -> str  
Выполняет запрос к модели чата OpenAI с системным и пользовательским сообщением, возвращая текст ответа.  
Аргументы  
config — Объект конфигурации приложения  
system — Системное сообщение, задающее поведение модели  
user — Пользовательский запрос  
response_format — Опциональный формат ответа (например, { "type": "json_object" })  
Возвращает  
Текст ответа от модели, очищенный от пробелов, или пустая строка при ошибке  
Исключения  
Может выбрасывать исключения от AsyncOpenAI (сетевые ошибки, невалидные ответы и т.п.)
