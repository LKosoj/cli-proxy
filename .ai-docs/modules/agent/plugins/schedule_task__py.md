# agent/plugins/schedule_task

Инструмент для планирования задач, напоминаний и отложенного выполнения команд. Позволяет пользователям создавать, просматривать и отменять задачи с задержкой до 24 часов. Поддерживает до 5 задач на пользователя. Задачи могут быть напоминаниями или выполнением shell-команд.

Ключевые структуры данных
scheduler_tasks — Глобальный словарь, хранящий все запланированные задачи по их ID.
user_tasks — Словарь, сопоставляющий ID пользователя с множеством его активных задач.

class ScheduleTaskTool
Плагин инструмента для управления отложенными задачами и напоминаниями.
Поля
scheduler_tasks — Глобальный словарь, хранящий все запланированные задачи по их ID.
user_tasks — Словарь, сопоставляющий ID пользователя с множеством его активных задач.
Методы
get_spec() -> ToolSpec — Возвращает спецификацию инструмента, включая параметры и ограничения.
execute(args: Dict[str, Any], ctx: Dict[str, Any]) -> Dict[str, Any] — Выполняет действие: добавление, список или отмену запланированной задачи.

---
get_spec() -> ToolSpec
Возвращает спецификацию инструмента для планирования задач.
Возвращает
Объект ToolSpec с описанием инструмента, параметрами и ограничениями.

---
execute(args: Dict[str, Any], ctx: Dict[str, Any]) -> Dict[str, Any]
Выполняет операцию с запланированной задачей: добавление, отображение списка или отмена.
Аргументы
args — Аргументы действия: action, type, content, delay_minutes, task_id
ctx — Контекст выполнения: session_id, chat_id, bot, context, cwd
Возвращает
Словарь с результатом выполнения: успех, сообщение или ошибка.
Исключения
Не выбрасывает исключения напрямую, но может возвращать ошибки в словаре результата.
