# agent/plugins/codeinterpreter

```markdown
Инструмент CodeInterpreterTool предоставляет возможность безопасного выполнения ограниченного Python-кода в изолированной среде на локальной машине.  
Код выполняется без возможности импорта модулей, доступа к файловой системе или выполнения потенциально опасных операций.  
Фильтрация на основе статического анализа предотвращает использование запрещённых конструкций, а выполнение происходит в отдельном процессе с таймаутом.

Ключевые структуры данных  
CodeInterpreterTool — Реализация плагина инструмента для выполнения безопасного Python-кода с ограничениями

---
def get_source_name() -> str  
Возвращает название источника инструмента.  
Возвращает  
Строка с названием: "Code Interpreter (Local Python)"

---
def get_spec(self) -> ToolSpec  
Возвращает спецификацию инструмента, включая параметры и ограничения.  
Возвращает  
Объект ToolSpec с описанием инструмента выполнения Python-кода

---
def execute(self, args: Dict[str, Any], ctx: Dict[str, Any]) -> Dict[str, Any]  
Асинхронно выполняет переданный Python-код с проверкой на безопасность и ограничением по времени.  
Аргументы  
args — Аргументы, содержащие код и опциональный таймаут; ключ `code` обязателен  
ctx — Контекст выполнения (не используется напрямую)  
Возвращает  
Результат выполнения: успех/ошибка и соответствующий вывод или сообщение об ошибке  
Исключения  
Любые исключения перехватываются и преобразуются в словарь с `success=False`

---
def _static_block(self, code: str) -> tuple[bool, str]  
Проверяет код на наличие запрещённых конструкций с помощью регулярных выражений.  
Аргументы  
code — Python-код в виде строки для анализа  
Возвращает  
Кортеж из булева флага (заблокировано ли) и причины блокировки

---
def _run_sync(self, code: str, timeout: int) -> str  
Синхронно запускает Python-код в отдельном процессе с ограниченным окружением.  
Аргументы  
code — Код на Python для выполнения  
timeout — Максимальное время выполнения в секундах  
Возвращает  
Стандартный вывод и ошибки выполнения в виде строки
```
