# agent/plugins/youtube_transcript

Модуль предоставляет инструмент для извлечения субтитров с YouTube-видео по его идентификатору. Поддерживается выбор приоритетных языков и автоматическое резервирование на доступные субтитры. Инструмент реализован как плагин `ToolPlugin` и использует библиотеку `youtube-transcript-api` в фоновом потоке.

Ключевые структуры данных  
YouTubeTranscriptTool — Плагин инструмента для получения субтитров с YouTube по video_id

---
def get_source_name() -> str  
Возвращает название источника данных.  
Возвращает  
Название источника — "YouTube Transcript"

---
def get_spec(self) -> ToolSpec  
Возвращает спецификацию инструмента.  
Возвращает  
Объект ToolSpec с параметрами: video_id (обязательный), languages (опциональный), таймаут 60 секунд, поддержка параллелизма

---
async def execute(self, args: Dict[str, Any], ctx: Dict[str, Any]) -> Dict[str, Any]  
Асинхронно извлекает субтитры YouTube по переданным аргументам.  
Аргументы  
args — Аргументы выполнения: video_id и опционально languages  
ctx — Контекст выполнения (не используется)  
Возвращает  
Словарь с ключами success, error (при ошибке) или output (при успехе)  
Исключения  
Любые исключения обрабатываются внутри метода и возвращаются как ошибка в результатах

---
def _fetch_sync(self, video_id: str, languages: List[str]) -> str  
Синхронно получает транскрипт видео с YouTube, используя приоритет языков.  
Аргументы  
video_id — Идентификатор YouTube-видео  
languages — Список приоритетных языков для поиска субтитров  
Возвращает  
Строка с текстом субтитров и информацией о языке и типе (ручной/автогенерированный)  
Исключения  
RuntimeError — Если не установлен пакет youtube-transcript-api
