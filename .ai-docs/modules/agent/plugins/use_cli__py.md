# agent/plugins/use_cli

```markdown
Модуль реализует плагин инструмента для делегирования сложных задач во внешний CLI-интерфейс (например, codex/gemini/claude code).  
Он позволяет передавать текст задачи в CLI через сессию, получать результат выполнения и возвращать его в структурированном виде.  
Используется, когда задача требует полноценного цикла разработки или выходит за рамки возможностей других инструментов.

Ключевые структуры данных  
UseCliTool — Плагин инструмента для взаимодействия с CLI через сессию выполнения запросов

---
def get_spec() -> ToolSpec  
Возвращает спецификацию инструмента use_cli.  
Аргументы  
Возвращает  
Объект ToolSpec с описанием инструмента, его параметрами и поведением  
Исключения

---
async def execute(args: Dict[str, Any], ctx: Dict[str, Any]) -> Dict[str, Any]  
Выполняет передачу задачи в CLI через сессию и возвращает результат.  
Аргументы  
args — Словарь с параметрами выполнения, должен содержать 'task_text'  
ctx — Контекст выполнения, должен содержать 'session' для взаимодействия с CLI  
Возвращает  
Словарь с результатом выполнения: успех/ошибка и соответствующие данные (output или error)  
Исключения  
Любое исключение, возникающее при выполнении сессии, логируется и возвращается как ошибка
```
