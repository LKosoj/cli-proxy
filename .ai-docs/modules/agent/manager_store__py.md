# agent/manager_store

Модуль предоставляет инструменты для управления жизненным циклом проектного плана разработки: загрузку, сохранение, архивирование и удаление плана в формате JSON.  
План хранится в файле `MANAGER_PLAN.json` в рабочей директории и содержит цель проекта, список задач, анализ состояния и метаданные.  
Операции записи выполняются атомарно, а предыдущие версии при необходимости архивируются с временной меткой.

Ключевые структуры данных
ProjectPlan — Основной контейнер плана проекта, включает задачи, анализ и статус
DevTask — Единица работы в рамках проекта с критериями приёмки и зависимостями
ProjectAnalysis — Анализ текущего состояния проекта: выполненные и оставшиеся задачи

_load_plan
Загрузить план из MANAGER_PLAN.json. Вернуть None, если файла нет.
Аргументы
workdir — Путь к рабочей директории, где ожидается файл плана
Возвращает
Загруженный объект ProjectPlan или None при отсутствии файла или ошибке
Исключения
Любые исключения логируются, но не пробрасываются наружу

save_plan
Атомарно сохранить план в MANAGER_PLAN.json.
Аргументы
workdir — Путь к рабочей директории для сохранения файла
plan — Объект ProjectPlan, который необходимо сохранить
Исключения
Любые исключения логируются, но не пробрасываются наружу

delete_plan
Удалить файл плана (при /manager reset).
Аргументы
workdir — Путь к рабочей директории, где находится файл плана
Исключения
Любые исключения логируются, но не пробрасываются наружу

archive_plan
Переместить MANAGER_PLAN.json в archive/MANAGER_PLAN_{date}_{status}.json.
Аргументы
workdir — Путь к рабочей директории, где находится файл плана
status — Статус проекта (например, "completed", "aborted"), используется в имени архивного файла
Возвращает
Путь к архивному файлу, в который был перемещён план, или None при ошибке
Исключения
Любые исключения логируются, но не пробрасываются наружу
