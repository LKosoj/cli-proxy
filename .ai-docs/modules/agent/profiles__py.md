# agent/profiles

Модуль предоставляет функции для создания и управления профилями исполнителей (ExecutorProfile), определяющими набор разрешённых инструментов, таймауты и количество попыток выполнения. Профили строятся на основе конфигурации приложения и доступных инструментов из реестра. Поддерживаются различные роли, такие как default, reviewer и developer.

Ключевые структуры данных  
ExecutorProfile — Конфигурационный профиль исполнителя, задающий разрешённые инструменты, таймаут и число попыток

class ExecutorProfile  
Конфигурационный профиль исполнителя, задающий разрешённые инструменты, таймаут и число попыток  
Поля  
name — Имя профиля, идентифицирующее его назначение  
allowed_tools — Список имён разрешённых инструментов  
timeout_ms — Максимальное время выполнения в миллисекундах  
max_retries — Максимальное количество повторных попыток при ошибке

---
def build_default_profile(config: AppConfig, tool_registry: ToolRegistry) -> ExecutorProfile  
Создаёт профиль по умолчанию с доступом ко всем инструментам и увеличенным таймаутом  
Аргументы  
config — Конфигурация приложения  
tool_registry — Реестр доступных инструментов  
Возвращает  
Объект ExecutorProfile с полным доступом к инструментам и таймаутом 600 секунд

---
def build_reviewer_profile(config: AppConfig, tool_registry: ToolRegistry) -> ExecutorProfile  
Создаёт профиль для режима ревьюера с ограниченным набором безопасных, в основном read-only инструментов  
Аргументы  
config — Конфигурация приложения  
tool_registry — Реестр доступных инструментов  
Возвращает  
Объект ExecutorProfile с разрешёнными инструментами для просмотра кода и запуска тестов

---
def build_developer_profile(config: AppConfig, tool_registry: ToolRegistry) -> ExecutorProfile  
Создаёт пустой профиль для разработчика, так как выполнение команд происходит через CLI  
Аргументы  
config — Конфигурация приложения  
tool_registry — Реестр доступных инструментов  
Возвращает  
Объект ExecutorProfile без разрешённых инструментов, с увеличенным таймаутом и без повторных попыток

---
def _available(tool_registry: ToolRegistry, names: List[str]) -> List[str]  
Фильтрует список имён инструментов, оставляя только те, что зарегистрированы в реестре  
Аргументы  
tool_registry — Реестр доступных инструментов  
names — Список запрашиваемых имён инструментов  
Возвращает  
Список имён, присутствующих в реестре
