# dirs_ui

```markdown
Модуль предоставляет функциональность для работы с файловой системой в контексте Telegram-бота, позволяя пользователям просматривать и навигировать по каталогам через интерфейс с кнопками. Поддерживается постраничный вывод, навигация, а также действия вроде создания каталога, git clone и ручного ввода пути.

Ключевые структуры данных
dirs_menu — словарь, сопоставляющий chat_id со списком полных путей к подкаталогам.
dirs_base — словарь, хранящий текущую базовую директорию для каждого пользователя.
dirs_page — словарь, отслеживающий текущую страницу просмотра каталогов для каждого пользователя.
dirs_root — словарь, определяющий корневую директорию, за пределы которой нельзя выходить.

prepare_dirs(dirs_menu: Dict[int, list], dirs_base: Dict[int, str], dirs_page: Dict[int, int], dirs_root: Dict[int, str], chat_id: int, base: str, allow_empty: bool = False) -> Optional[str]
Подготавливает список подкаталогов для указанной директории и сохраняет состояние навигации.
Аргументы
dirs_menu — словарь для хранения списка полных путей к подкаталогам по chat_id.
dirs_base — словарь для сохранения текущей базовой директории пользователя.
dirs_page — словарь для отслеживания текущей страницы просмотра.
dirs_root — словарь с корневыми директориями, ограничивающими доступ.
chat_id — идентификатор чата пользователя.
base — путь к базовой директории, содержимое которой анализируется.
allow_empty — флаг, разрешающий пустой список подкаталогов без ошибки.
Возвращает
Сообщение об ошибке, если операция не удалась; None при успехе.
Исключения
Отсутствуют

---
build_dirs_keyboard(dirs_menu: Dict[int, list], dirs_base: Dict[int, str], dirs_page: Dict[int, int], short_label, chat_id: int, base: str, page: int) -> InlineKeyboardMarkup
Формирует клавиатуру с кнопками для навигации по каталогам и выполнения действий.
Аргументы
dirs_menu — словарь с полными путями подкаталогов, доступными пользователю.
dirs_base — словарь для обновления текущей базовой директории.
dirs_page — словарь для обновления номера текущей страницы.
short_label — функция, преобразующая имя каталога в краткий отображаемый текст.
chat_id — идентификатор чата пользователя.
base — текущая базовая директория.
page — номер страницы для постраничного отображения.
Возвращает
Объект InlineKeyboardMarkup, готовый к отправке в Telegram.
Исключения
Отсутствуют
```
