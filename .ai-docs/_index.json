{
  "generated_at": "2026-02-01T20:00:23.892446Z",
  "docs_dir": ".ai-docs",
  "rules": {
    "priority": [
      "modules/index.md",
      "modules/*",
      "configs/index.md",
      "configs/files/*",
      "index.md",
      "architecture.md",
      "conventions.md"
    ],
    "ranking": "keyword frequency + file priority",
    "usage": "use this index to choose a narrow route before reading full docs"
  },
  "sections": [
    {
      "id": "architecture",
      "title": "Архитектура",
      "path": "architecture.md"
    },
    {
      "id": "runtime",
      "title": "Запуск и окружение",
      "path": "runtime.md"
    },
    {
      "id": "dependencies",
      "title": "Зависимости",
      "path": "dependencies.md"
    },
    {
      "id": "testing",
      "title": "Тестирование",
      "path": "testing.md"
    },
    {
      "id": "conventions",
      "title": "Соглашения",
      "path": "conventions.md"
    },
    {
      "id": "glossary",
      "title": "Глоссарий",
      "path": "glossary.md"
    },
    {
      "id": "configs",
      "title": "Конфигурация проекта",
      "path": "configs/index.md"
    }
  ],
  "modules": [
    {
      "name": "session_ui",
      "path": "modules/session_ui.md",
      "source_path": "session_ui.py",
      "summary": "Модуль предоставляет пользовательский интерфейс для управления сессиями через Telegram-бота. Он позволяет просматривать список сессий, выбирать активную, переименовывать, обновлять токен возобновления, а также получать статус и управлять очередью сессий. Взаимодействие осуществляется через inline-кнопки и обработку сообщений."
    },
    {
      "name": "mtproto_ui",
      "path": "modules/mtproto_ui.md",
      "source_path": "mtproto_ui.py",
      "summary": "Модуль предоставляет интерфейс для взаимодействия с MTProto через Telegram-бота с использованием библиотеки Telethon. Позволяет выбирать целевые чаты из конфигурации, вводить сообщения и отправлять их через MTProto-сессию. Поддерживает отправку текстовых сообщений и файлов, а также обработку пользовательских действий через inline-кнопки. Работа с MTProto инкапсулирована, включая ленивую инициализацию клиента и проверку авторизации."
    },
    {
      "name": "config",
      "path": "modules/config.md",
      "source_path": "config.py",
      "summary": "Модуль предоставляет средства для загрузки и сохранения конфигурации приложения из YAML-файла. Основной объект конфигурации — `AppConfig`, содержащий настройки Telegram-бота, внешних инструментов, MTProto-клиента, MCP-сервера и других компонентов. Конфигурация строится на основе dataclass-структур, что обеспечивает типобезопасность и удобство работы. Модуль автоматически обрабатывает типы данных, применяет значения по умолчанию и поддерживает сложные вложенные структуры."
    },
    {
      "name": "state",
      "path": "modules/state.md",
      "source_path": "state.py",
      "summary": "Модуль для управления состоянием сессий и активных сессий в файловой системе. Предоставляет функции для загрузки, сохранения, обновления и удаления состояний сессий,"
    },
    {
      "name": "command_registry",
      "path": "modules/command_registry.md",
      "source_path": "command_registry.py",
      "summary": "Модуль реализует реестр команд для бота, формируя список доступных команд с их описаниями, обработчиками и флагами отображения в меню. Список команд генерируется на основе конфигурации приложения, в частности, с учётом доступности MTProto-функциональности."
    },
    {
      "name": "metrics",
      "path": "modules/metrics.md",
      "source_path": "metrics.py",
      "summary": "Модуль предоставляет класс `Metrics` для сбора и отслеживания различных счётчиков производительности и активности в приложении. Он позволяет инкрементировать счётчики по ключам, фиксировать момент и размер вывода, а также формировать текстовое представление текущих метрик."
    },
    {
      "name": "mcp_bridge",
      "path": "modules/mcp_bridge.md",
      "source_path": "mcp_bridge.py",
      "summary": "Модуль реализует мост между внешними клиентами и ботом через TCP-сервер, используя JSON-сообщения. Клиенты могут отправлять текстовые запросы (prompt) с токеном аутентификации, получать ответы от бота и управлять сессиями. Сервер запускается только если соответствующая функция включена в конфигурации. Поддерживается проверка токена, обработка ошибок и построчная передача JSON-сообщений."
    },
    {
      "name": "bot",
      "path": "modules/bot.md",
      "source_path": "bot.py",
      "summary": "BotApp — основной класс приложения Telegram-бота для управления сессиями выполнения инструментов, взаимодействия с Git, MTProto, отображения состояний и файлов. Модуль координирует работу компонентов: сессий, интерфейсов, метрик, конфигурации и внешних систем (MCP, Git)."
    },
    {
      "name": "summary",
      "path": "modules/summary.md",
      "source_path": "summary.py",
      "summary": "Модуль предоставляет функциональность для автоматического резюмирования текста и генерации сообщений коммитов с использованием API OpenAI. Поддерживает настройку через переменные окружения и конфигурационный объект, обработку ошибок, предварительную очистку входных данных и форматирование ключевой информации. Основной язык вывода — русский."
    },
    {
      "name": "git_ops",
      "path": "modules/git_ops.md",
      "source_path": "git_ops.py",
      "summary": "Модуль предоставляет инструменты для управления Git-операциями в Telegram-боте через асинхронные вызовы. Он интегрируется с сессиями пользователя, обеспечивает безопасный ввод данных через временные скрипты и формирует интерактивные клавиатуры для выполнения типичных Git-команд. Все операции выполняются с учётом состояния сессии и наличия активного репозитория. Поддерживается обработка конфликтов, многошаговые операции и аутентификация через GitHub-токен."
    },
    {
      "name": "dirs_ui",
      "path": "modules/dirs_ui.md",
      "source_path": "dirs_ui.py",
      "summary": "Модуль предоставляет функциональность для работы с файловой системой в контексте Telegram-бота, позволяя пользователям просматривать и навигировать по каталогам через интерфейс с кнопками. Поддерживается постраничный вывод, навигация, а также действия вроде создания каталога, git clone и ручного ввода пути."
    },
    {
      "name": "toolhelp",
      "path": "modules/toolhelp.md",
      "source_path": "toolhelp.py",
      "summary": "Модуль предоставляет инструменты для управления справочной информацией о функциях (инструментах) в формате JSON. Данные хранятся в виде словаря, где ключом является имя инструмента, а значением — объект с описанием и временем обновления. Поддерживаются операции загрузки, сохранения, обновления и получения справки по инструменту."
    },
    {
      "name": "utils",
      "path": "modules/utils.md",
      "source_path": "utils.py",
      "summary": "Модуль предоставляет инструменты для обработки текста, содержащего ANSI-коды, Markdown и Mermaid-диаграммы, с последующей конвертацией в HTML. Основное назначение — преобразование терминального вывода (например, логов) в читаемый HTML-формат с сохранением цветового форматирования и визуализацией диаграмм. Поддерживаются фильтрация служебных строк, удаление дубликатов блоков и извлечение временных меток."
    },
    {
      "name": "session",
      "path": "modules/session.md",
      "source_path": "session.py",
      "summary": "Модуль реализует управление сессиями взаимодействия с внешними инструментами через командную строку. Поддерживает как headless-режим (однократные команды), так и интерактивный режим (через pexpect). Сессии сохраняют состояние, обнаруживают приглашения и токены возобновления, управляют таймаутами. Работает в асинхронной среде, обеспечивает потокобезопасность и сохранение состояния между перезапусками."
    }
  ],
  "configs": [
    {
      "name": "toolhelp.json",
      "path": "configs/files/toolhelp__json.md",
      "source_path": "toolhelp.json",
      "summary": "Файл содержит справочную информацию о доступных slash-командах для различных инструментов искусственного интеллекта, используемых в CLI-режиме. Каждая запись соответствует конкретному инструменту и включает его название, тип, описание с перечнем команд и временную метку обновления. Данные предназначены для быстрого ознакомления с функциональными возможностями каждого инструмента через встроенные команды. Информация унифицирована для сравнения и использования в интерактивной среде."
    },
    {
      "name": "config_example.yaml",
      "path": "configs/files/config_example__yaml.md",
      "source_path": "config_example.yaml",
      "summary": "Конфигурационный файл задаёт параметры Telegram-бота, взаимодействующего с ИИ-инструментами через командную строку. Включает настройки подключения к Telegram, конфигурацию инструментов (codex, claude, gemini, qwen), пути по умолчанию, переменные окружения, а также опциональные модули — MTProto-клиент для пересылки сообщений и MCP-сервер для внешнего взаимодействия."
    }
  ],
  "files": [
    "_index.json",
    "architecture.md",
    "changes.md",
    "configs/files/config_example__yaml.md",
    "configs/files/toolhelp__json.md",
    "configs/index.md",
    "conventions.md",
    "dependencies.md",
    "glossary.md",
    "index.md",
    "modules/bot__py.md",
    "modules/command_registry__py.md",
    "modules/config__py.md",
    "modules/dirs_ui__py.md",
    "modules/git_ops__py.md",
    "modules/index.md",
    "modules/mcp_bridge__py.md",
    "modules/metrics__py.md",
    "modules/mtproto_ui__py.md",
    "modules/session__py.md",
    "modules/session_ui__py.md",
    "modules/state__py.md",
    "modules/summary__py.md",
    "modules/toolhelp__py.md",
    "modules/utils__py.md",
    "runtime.md",
    "testing.md"
  ]
}
