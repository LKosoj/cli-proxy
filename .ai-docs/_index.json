{
  "sections": [
    {
      "id": "architecture",
      "title": "Архитектура",
      "path": "architecture.md"
    },
    {
      "id": "runtime",
      "title": "Запуск и окружение",
      "path": "runtime.md"
    },
    {
      "id": "dependencies",
      "title": "Зависимости",
      "path": "dependencies.md"
    },
    {
      "id": "testing",
      "title": "Тестирование",
      "path": "testing.md"
    },
    {
      "id": "conventions",
      "title": "Соглашения",
      "path": "conventions.md"
    },
    {
      "id": "glossary",
      "title": "Глоссарий",
      "path": "glossary.md"
    },
    {
      "id": "configs",
      "title": "Конфигурация проекта",
      "path": "configs/index.md"
    }
  ],
  "modules": [
    {
      "name": "session_ui",
      "path": "modules/session_ui.md",
      "source_path": "session_ui.py",
      "summary": "Модуль предоставляет пользовательский интерфейс для управления сессиями через Telegram-бота. Он позволяет просматривать список сессий, выбирать активную, переименовывать, обновлять токен возобновления, а также получать статус и управлять очередью. Взаимодействие осуществляется через inline-кнопки и текстовые сообщения."
    },
    {
      "name": "config",
      "path": "modules/config.md",
      "source_path": "config.py",
      "summary": "Модуль предоставляет средства для загрузки и управления конфигурацией приложения через YAML-файл. Основной объект конфигурации — `AppConfig`, содержащий настройки Telegram-бота, инструментов, MCP-серверов, пресетов и других параметров. Конфигурация разбита на логические компоненты, представленные dataclass-ами, что обеспечивает типобезопасность и удобство использования. Функция `load_config` парсит YAML-файл и возвращает объект `AppConfig`. Также реализована функция `save_config` для сохранения конфигурации обратно в файл."
    },
    {
      "name": "state",
      "path": "modules/state.md",
      "source_path": "state.py",
      "summary": "Модуль предоставляет средства для управления состоянием сессий и активного состояния инструментов в файле формата JSON. Поддерживается сохранение, загрузка, обновление и удаление состояний по ключу, а также работа с активной сессией и дополнительными сессионными данными. Все операции выполняются с обработкой ошибок и логированием, данные хранятся в виде JSON-файлов на диске."
    },
    {
      "name": "command_registry",
      "path": "modules/command_registry.md",
      "source_path": "command_registry.py",
      "summary": "Модуль предоставляет функцию для построения реестра команд бота, где каждая команда ассоциируется с обработчиком и метаданными. Реестр используется для маршрутизации пользовательских команд к соответствующим методам приложения."
    },
    {
      "name": "metrics",
      "path": "modules/metrics.md",
      "source_path": "metrics.py",
      "summary": "Класс для сбора и отображения эксплуатационной статистики приложения. Поддерживает счётчики событий, отслеживание времени последнего вывода и формирование читаемого отчёта. Все данные хранятся в памяти, сброс состояния происходит при инициализации."
    },
    {
      "name": "mcp_bridge",
      "path": "modules/mcp_bridge.md",
      "source_path": "mcp_bridge.py",
      "summary": "Модуль реализует мост для взаимодействия с внешними системами через TCP-сервер, используя JSON-сообщения. Он позволяет принимать запросы с текстовыми запросами (prompt), аутентифицировать их по токену и передавать в приложение бота для обработки. Ответ возвращается в виде JSON-объекта по тому же соединению. Поддерживается управление жизненным циклом сервера (запуск и остановка)."
    },
    {
      "name": "summary",
      "path": "modules/summary.md",
      "source_path": "summary.py",
      "summary": "Модуль предоставляет асинхронные функции для генерации кратких резюме текста с использованием OpenAI API. Основной функционал включает очистку входного текста, адаптацию длины резюме под объём исходных данных и извлечение ключевой информации из конца текста. Поддерживается настройка через переменные окружения и конфигурационный объект, а также обработка ошибок API. Дополнительно модуль предоставляет функциональность для генерации сообщений коммитов с использованием языковых моделей через OpenAI-compatible API. Основные функции позволяют получать краткие или детализированные сообщения коммитов на основе текстового описания изменений. Поддерживается асинхронный и синхронный вызов, автоматическая обработка ответов и извлечение структурированных данных."
    },
    {
      "name": "git_ops",
      "path": "modules/git_ops.md",
      "source_path": "git_ops.py",
      "summary": "Модуль `GitOps` предоставляет инструменты для управления Git-репозиторием через Telegram-интерфейс. Интегрируется с активными сессиями, обеспечивает безопасное выполнение Git-команд и обработку конфликтов. Поддерживает аутентификацию через GitHub-токен с использованием временного скрипта `GIT_ASKPASS`. Все действия инициируются через callback-кнопки, предоставляя удобный интерактивный интерфейс."
    },
    {
      "name": "dirs_ui",
      "path": "modules/dirs_ui.md",
      "source_path": "dirs_ui.py",
      "summary": "Модуль предоставляет функциональность для навигации по каталогам в Telegram-боте с поддержкой постраничного отображения, проверки доступа к директориям и формирования интерактивных клавиатур. Он использует состояние пользователя (через `chat_id`) для хранения текущего пути, страницы и списка доступных подкаталогов."
    },
    {
      "name": "toolhelp",
      "path": "modules/toolhelp.md",
      "source_path": "toolhelp.py",
      "summary": "Модуль предоставляет простую систему хранения и управления справочной информацией для инструментов (tools) в формате JSON-файла. Данные сохраняются с меткой времени обновления, что позволяет отслеживать актуальность справки."
    },
    {
      "name": "utils",
      "path": "modules/utils.md",
      "source_path": "utils.py",
      "summary": "Модуль предоставляет инструменты для обработки текста с ANSI-кодами, преобразования Markdown и Mermaid-диаграмм в HTML, а также нормализации вывода терминала. Основное применение — подготовка чистого, визуально корректного HTML-представления из сырых терминальных логов, включая удаление служебных строк, дубликатов и безопасное отображение разметки. Поддерживается интеграция с внешним сервисом mermaid.ink для рендеринга диаграмм."
    },
    {
      "name": "session",
      "path": "modules/session.md",
      "source_path": "session.py",
      "summary": "Модуль реализует управление сессиями выполнения внешних инструментов (например, AI-агентов или CLI-приложений) в интерактивном или headless-режиме. Обеспечивает асинхронное выполнение команд, обработку ввода/вывода, детекцию состояний (активность, простоя, конфликты Git), поддержку изображений и возобновление сессий. Состояние сессий сохраняется и восстанавливается через внешние хранилища, а процессы изолируются с использованием `pexpect` и `asyncio.subprocess`. Управление централизовано через `SessionManager`, отвечающий за создание, переключение и персистентность сессий."
    },
    {
      "name": "agent/dispatcher",
      "path": "modules/agent/dispatcher.md",
      "source_path": "agent/dispatcher.py",
      "summary": "Диспетчер отвечает за выбор профиля исполнителя для каждого шага плана. На текущий момент поддерживается только один профиль по умолчанию, но архитектура позволяет расширить логику выбора в будущем. Инициализируется с конфигурацией и реестром инструментов."
    },
    {
      "name": "agent/memory_policy",
      "path": "modules/agent/memory_policy.md",
      "source_path": "agent/memory_policy.py",
      "summary": "Модуль отвечает за управление долговременной памятью проекта: принимает решение о сохранении информации на основе диалога и сжимает память при превышении лимита. Использует LLM через `chat_completion` для анализа и обработки текста памяти. Оперирует строго структурированными данными и поддерживает категории важности для фильтрации содержимого."
    },
    {
      "name": "agent/openai_client",
      "path": "modules/agent/openai_client.md",
      "source_path": "agent/openai_client.py",
      "summary": "Модуль предоставляет асинхронные функции для взаимодействия с OpenAI API с использованием конфигурации приложения. Он позволяет создавать клиент, настроенный по данным из `AppConfig`, и выполнять запросы к модели чата."
    },
    {
      "name": "agent/planner",
      "path": "modules/agent/planner.md",
      "source_path": "agent/planner.py",
      "summary": "Модуль отвечает за построение плана выполнения задачи пользователя в виде последовательности шагов. Использует LLM для генерации структурированного плана в формате JSON, который затем парсится и валидируется."
    },
    {
      "name": "agent/memory_store",
      "path": "modules/agent/memory_store.md",
      "source_path": "agent/memory_store.py",
      "summary": "Модуль предоставляет инструменты для работы с файлом памяти `MEMORY.md`, расположенным в заданной директории. Он позволяет читать, записывать и дополнять содержимое памяти, а также парсить записи с временной меткой и тегами. Поддерживается фильтрация дубликатов, обрезка по размеру и компактизация записей по приоритету тегов."
    },
    {
      "name": "agent/session_store",
      "path": "modules/agent/session_store.md",
      "source_path": "agent/session_store.py",
      "summary": "Модуль предоставляет потокобезопасные операции чтения и записи JSON-файлов с использованием системных блокировок. Поддерживает чтение с разделяемой блокировкой и запись с эксклюзивной блокировкой, предотвращая гонки при доступе к файлу. Автоматически создаёт родительские директории пути при необходимости. Все операции обрабатывают ошибки и возвращают значения по умолчанию в случае сбоев."
    },
    {
      "name": "agent/contracts",
      "path": "modules/agent/contracts.md",
      "source_path": "agent/contracts.py",
      "summary": "Модуль определяет структуры данных и валидационные функции для управления пошаговым выполнением задач в распределённой или параллельной среде. Основные сущности — `PlanStep`, `ExecutorRequest` и `ExecutorResponse` — описывают шаги плана, входные запросы и выходные ответы исполнителя. Валидация входных и выходных данных обеспечивает целостность обмена между оркестратором и исполнителем."
    },
    {
      "name": "agent/__init__",
      "path": "modules/agent/__init__.md",
      "source_path": "agent/__init__.py",
      "summary": "Модуль предоставляет основные компоненты для запуска агента, управления инструментами и выполнения команд. Включает ядро агента, реестр инструментов и вспомогательные функции для работы с командами оболочки."
    },
    {
      "name": "agent/agent_core",
      "path": "modules/agent/agent_core.md",
      "source_path": "agent/agent_core.py",
      "summary": "Агентная система, реализующая архитектуру ReAct (Reasoning + Action) для взаимодействия с инструментами и генерации ответов через LLM. Поддерживает асинхронное выполнение, управление сессиями, историей чата, памятью и ограничениями на инструменты. Состояние сессии сохраняется в файловой системе с потокобезопасными операциями. Агент взаимодействует с OpenAI API и поддерживает корреляцию запросов, трассировку и логирование."
    },
    {
      "name": "agent/heuristics",
      "path": "modules/agent/heuristics.md",
      "source_path": "agent/heuristics.py",
      "summary": "Модуль предоставляет утилиты для обработки шагов плана и определения необходимости уточнения входного текста на основе конфигурации. Основные функции включают проверку текста на признаки вопросов и автоматическую нормализацию шагов, требующих уточнений. Использует конфигурацию приложения и контракт `PlanStep` для согласованной обработки."
    },
    {
      "name": "agent/orchestrator",
      "path": "modules/agent/orchestrator.md",
      "source_path": "agent/orchestrator.py",
      "summary": "Основной модуль оркестратора, управляющий планированием, выполнением шагов и взаимодействием с пользователем. Интегрирует планировщик, исполнитель и диспетчер для обработки пользовательского запроса в рамках сессии. Поддерживает повторное планирование на основе уточнений, управление контекстом и историей выполнения. Управляет порядком выполнения шагов с учётом зависимостей, параллелизма и статусов завершения. Обеспечивает интеграцию с исполнителем (executor) для запуска шагов, обработку блокировок и зависимостей, а также взаимодействие с пользователем. Поддерживает устойчивость к циклическим зависимостям и корректное завершение при ошибках. Также отвечает за управление памятью агента, включая принятие решений о сохранении информации, компрессию при превышении лимитов и обеспечение устойчивости к нехватке места. Основная логика сосредоточена на асинхронном анализе релевантности контента и его последующей оптимизации. Используются внешние функции для чтения, записи и сжатия памяти на основе конфигурации."
    },
    {
      "name": "agent/profiles",
      "path": "modules/agent/profiles.md",
      "source_path": "agent/profiles.py",
      "summary": "Модуль предоставляет функциональность для создания и управления профилями исполнителей, определяющими набор разрешённых инструментов, таймауты и количество попыток выполнения."
    },
    {
      "name": "agent/executor",
      "path": "modules/agent/executor.md",
      "source_path": "agent/executor.py",
      "summary": "Модуль реализует исполнителя задач (Executor), управляющий выполнением агентных операций на основе входящих запросов. Он инкапсулирует логику запуска агентов, обработки временных сбоев, повторных попыток и взаимодействия с пользователем через инструменты. Поддерживает изоляцию сессий, управление временными ограничениями и регистрацию действий через реестр инструментов."
    },
    {
      "name": "agent/tooling/loader",
      "path": "modules/agent/tooling/loader.md",
      "source_path": "agent/tooling/loader.py",
      "summary": "Класс `PluginLoader` предназначен для динамической загрузки плагинов инструментов из указанной директории. Он сканирует файлы Python, исключая системные и базовые, и загружает модули, содержащие классы, наследующиеся от `ToolPlugin`. Каждый найденный валидный класс инстанцируется и возвращается в виде списка активных плагинов."
    },
    {
      "name": "agent/tooling/helpers",
      "path": "modules/agent/tooling/helpers.md",
      "source_path": "agent/tooling/helpers.py",
      "summary": "This module provides secure execution of shell commands and file operations within a restricted workspace environment. It includes mechanisms for command approval, pattern-based blocking, workspace isolation, and output sanitization to prevent security risks. The module also handles background process launching and enforces timeouts to avoid long-running or hanging operations."
    },
    {
      "name": "agent/tooling/__init__",
      "path": "modules/agent/tooling/__init__.md",
      "source_path": "agent/tooling/__init__.py",
      "summary": "Модуль предоставляет функциональность для работы с базовыми операциями обработки данных и управления состоянием."
    },
    {
      "name": "agent/tooling/spec",
      "path": "modules/agent/tooling/spec.md",
      "source_path": "agent/tooling/spec.py",
      "summary": "Модуль предоставляет базовые структуры для описания и использования инструментов (tools) в системах, взаимодействующих с ИИ-моделями. Основной класс `ToolSpec` описывает спецификацию инструмента с поддержкой преобразования в форматы, совместимые с OpenAI и Google."
    },
    {
      "name": "agent/tooling/registry",
      "path": "modules/agent/tooling/registry.md",
      "source_path": "agent/tooling/registry.py",
      "summary": "Модуль предоставляет централизованное управление инструментами (tools), включая их регистрацию, выполнение и состояние. Поддерживает параллельное и последовательное выполнение вызовов инструментов в зависимости от их спецификаций."
    },
    {
      "name": "agent/tooling/constants",
      "path": "modules/agent/tooling/constants.md",
      "source_path": "agent/tooling/constants.py",
      "summary": "Модуль определяет глобальные константы, используемые для настройки таймаутов и ограничений на длину вывода в различных операциях, таких как выполнение инструментов, поиск по тексту и получение данных из веба. Эти значения обеспечивают единые параметры производительности и безопасности по всему приложению. Константы используются для предотвращения бесконечных операций и избыточного потребления памяти."
    },
    {
      "name": "agent/tooling/mcp_plugin",
      "path": "modules/agent/tooling/mcp_plugin.md",
      "source_path": "agent/tooling/mcp_plugin.py",
      "summary": "Модуль реализует плагин инструмента для интеграции с удалёнными MCP (Model Control Protocol) сервисами. Он позволяет регистрировать и выполнять вызовы к MCP-инструментам через менеджер MCP, преобразуя их спецификации и результаты в стандартный формат. Плагин обеспечивает нормализацию схем ввода и форматирование вывода результатов выполнения инструментов."
    },
    {
      "name": "agent/plugins/search_text",
      "path": "modules/agent/plugins/search_text.md",
      "source_path": "agent/plugins/search_text.py",
      "summary": "Модуль реализует инструмент поиска текста или регулярных выражений в файлах с использованием `grep` через плагин `ToolPlugin`. Поиск выполняется в указанной директории или файле с поддержкой контекста, нечувствительности к регистру и фильтрации по типам файлов."
    },
    {
      "name": "agent/plugins/show_me_diagrams",
      "path": "modules/agent/plugins/show_me_diagrams.md",
      "source_path": "agent/plugins/show_me_diagrams.py",
      "summary": "Модуль реализует инструмент для генерации и рендеринга диаграмм с использованием PlantUML. Поддерживает два режима: генерация PlantUML-кода на основе описания с помощью LLM и рендеринг существующего кода в PNG. Требует наличия `plantuml.jar` и Java в системе, а также OpenAI API-ключа для генерации кода. Результат включает путь к изображению и исходный PlantUML-код."
    },
    {
      "name": "agent/plugins/ddg_image_search",
      "path": "modules/agent/plugins/ddg_image_search.md",
      "source_path": "agent/plugins/ddg_image_search.py",
      "summary": "Модуль предоставляет инструмент поиска изображений и GIF-файлов через DuckDuckGo Images в виде плагина для агента. Он позволяет выполнять асинхронные запросы к DuckDuckGo через синхронный интерфейс библиотеки `duckduckgo-search`, обрабатывая результаты и возвращая случайный URL найденного изображения. Инструмент поддерживает параметры поиска: тип контента, регион и максимальное количество результатов."
    },
    {
      "name": "agent/plugins/read_file",
      "path": "modules/agent/plugins/read_file.md",
      "source_path": "agent/plugins/read_file.py",
      "summary": "Модуль реализует инструмент для безопасного чтения содержимого файлов в рамках рабочей области. Он проверяет права доступа, исключает чтение чувствительных и внешних файлов, поддерживает чтение по частям (смещение и лимит строк). Интегрируется в систему плагинов инструментов агента через базовый класс `ToolPlugin`."
    },
    {
      "name": "agent/plugins/github_analysis",
      "path": "modules/agent/plugins/github_analysis.md",
      "source_path": "agent/plugins/github_analysis.py",
      "summary": "Модуль предоставляет инструмент для асинхронного получения содержимого файлов из публичных или приватных репозиториев GitHub по указанному пути. Поддерживает загрузку одного файла, списка файлов из директории, с ограничением на максимальное количество возвращаемых файлов. Аутентификация осуществляется через токен GitHub, передаваемый через переменную окружения или конфигурацию. Результат включает имена файлов и их содержимое в текстовом виде."
    },
    {
      "name": "agent/plugins/wolfram_alpha",
      "path": "modules/agent/plugins/wolfram_alpha.md",
      "source_path": "agent/plugins/wolfram_alpha.py",
      "summary": "Модуль реализует интеграцию с WolframAlpha через плагин инструмента, позволяя выполнять вычисления и получать ответы на запросы с использованием внешнего API. Запросы обрабатываются асинхронно, с поддержкой таймаутов и валидации входных данных. Для аутентификации требуется API-ключ, задаваемый через переменную окружения `WOLFRAM_APP_ID`."
    },
    {
      "name": "agent/plugins/base",
      "path": "modules/agent/plugins/base.md",
      "source_path": "agent/plugins/base.py",
      "summary": "Базовый модуль для реализации плагинов инструментов (tools) в агентной системе. Определяет абстрактный класс `ToolPlugin` как основу для всех плагинов, а также предоставляет миксин `DialogMixin` для поддержки интерактивных диалогов с пользователем. Включает стандартные механизмы управления состоянием, обработки команд и интеграции с Telegram UI."
    },
    {
      "name": "agent/plugins/list_directory",
      "path": "modules/agent/plugins/list_directory.md",
      "source_path": "agent/plugins/list_directory.py",
      "summary": "Модуль реализует инструмент для безопасного просмотра содержимого директории в рамках изолированной рабочей среды. Он проверяет путь на соответствие разрешённым областям, блокирует доступ к системным и приватным директориям, а также выполняет команду `ls -la` для получения детального списка файлов. Инструмент интегрируется в систему плагинов через базовый класс `ToolPlugin`."
    },
    {
      "name": "agent/plugins/ask_user",
      "path": "modules/agent/plugins/ask_user.md",
      "source_path": "agent/plugins/ask_user.py",
      "summary": "Модуль реализует инструмент взаимодействия с пользователем через вопрос с выбором из предложенных вариантов. Используется в рамках системы планирования агента для получения подтверждения или выбора действия от пользователя."
    },
    {
      "name": "agent/plugins/text_document_qa",
      "path": "modules/agent/plugins/text_document_qa.md",
      "source_path": "agent/plugins/text_document_qa.py",
      "summary": "Модуль реализует инструмент для работы с текстовыми документами в рамках агента: загрузка, просмотр списка, задание вопросов по содержимому и удаление. Документы сохраняются в виде текстовых файлов с метаданными, а взаимодействие происходит через диалоговый интерфейс Telegram. Поддерживается интеграция с LLM через AsyncOpenAI для ответов на вопросы по документам."
    },
    {
      "name": "agent/plugins/manage_message",
      "path": "modules/agent/plugins/manage_message.md",
      "source_path": "agent/plugins/manage_message.py",
      "summary": "Модуль реализует инструмент для управления последними сообщениями пользователя в текущем чате: удаление или редактирование. Позволяет исправлять опечатки, удалять спам или нежелательные сообщения. Действия ограничены только сообщениями текущего пользователя в рамках текущего диалога."
    },
    {
      "name": "agent/plugins/send_file",
      "path": "modules/agent/plugins/send_file.md",
      "source_path": "agent/plugins/send_file.py",
      "summary": "SendFileTool — это плагин инструмента, позволяющий отправлять файлы из рабочей области в чат. Он проверяет путь к файлу, разрешён ли доступ к нему, его размер и чувствительность (например, блокирует отправку файлов с ключами или учётными данными). Инструмент используется для безопасного обмена файлами между агентом и пользователем через бота."
    },
    {
      "name": "agent/plugins/codeinterpreter",
      "path": "modules/agent/plugins/codeinterpreter.md",
      "source_path": "agent/plugins/codeinterpreter.py",
      "summary": "Инструмент CodeInterpreterTool предоставляет возможность безопасного выполнения ограниченного Python-кода в изолированной среде на локальной машине. Код выполняется без возможности импорта модулей, доступа к файловой системе или выполнения потенциально опасных операций."
    },
    {
      "name": "agent/plugins/task_management",
      "path": "modules/agent/plugins/task_management.md",
      "source_path": "agent/plugins/task_management.py",
      "summary": "/** * @brief Модуль управления задачами для Telegram-бота с поддержкой создания, просмотра, обновления, удаления и отслеживания задач."
    },
    {
      "name": "agent/plugins/movie_info",
      "path": "modules/agent/plugins/movie_info.md",
      "source_path": "agent/plugins/movie_info.py",
      "summary": "Модуль предоставляет инструмент для получения информации о фильмах через API The Movie Database (TMDb). Поддерживает два действия: получение фильмов, которые сейчас в прокате, и поиск по жанрам через discover."
    },
    {
      "name": "agent/plugins/delete_file",
      "path": "modules/agent/plugins/delete_file.md",
      "source_path": "agent/plugins/delete_file.py",
      "summary": "Модуль реализует инструмент удаления файлов в рамках рабочей директории. Он обеспечивает безопасное удаление файлов с проверкой доступа и расположения."
    },
    {
      "name": "agent/plugins/search_web",
      "path": "modules/agent/plugins/search_web.md",
      "source_path": "agent/plugins/search_web.py",
      "summary": "Модуль реализует инструмент поиска в интернете как плагин для агента. Позволяет выполнять веб-поисковые запросы через внешний API и получать результаты в структурированном виде."
    },
    {
      "name": "agent/plugins/haiper_image_to_video",
      "path": "modules/agent/plugins/haiper_image_to_video.md",
      "source_path": "agent/plugins/haiper_image_to_video.py",
      "summary": "Модуль предоставляет инструмент для генерации видео на основе изображения и текстового описания с использованием внешнего API (api.vsegpt.ru). Основная логика включает чтение изображения, отправку запроса на анимацию, ожидание результата и сохранение сгенерированного видео во временной директории. Работа с API осуществляется синхронно в отдельном потоке, чтобы не блокировать асинхронный цикл."
    },
    {
      "name": "agent/plugins/run_command",
      "path": "modules/agent/plugins/run_command.md",
      "source_path": "agent/plugins/run_command.py",
      "summary": "Модуль реализует инструмент выполнения shell-команд в рамках безопасного окружения агента. Предоставляет возможность запуска команд через `run_command`, включая контроль рисков, проверку безопасности и управление утверждением действий пользователем. Интегрируется с системой плагинов через базовый класс `ToolPlugin` и использует вспомогательные функции из `helpers`."
    },
    {
      "name": "agent/plugins/edit_file",
      "path": "modules/agent/plugins/edit_file.md",
      "source_path": "agent/plugins/edit_file.py",
      "summary": "EditFileTool — это плагин инструмента, позволяющий редактировать файлы в рабочей области путём точной замены текста. Он обеспечивает безопасность, проверяя путь к файлу, тип файла, символические ссылки и содержимое на наличие опасного кода. Редактирование выполняется только при точном совпадении заменяемого текста и при соблюдении всех правил безопасности."
    },
    {
      "name": "agent/plugins/__init__",
      "path": "modules/agent/plugins/__init__.md",
      "source_path": "agent/plugins/__init__.py",
      "summary": "Модуль предоставляет функциональность для работы с базовыми операциями обработки данных и управления состоянием."
    },
    {
      "name": "agent/plugins/prompt_perfect",
      "path": "modules/agent/plugins/prompt_perfect.md",
      "source_path": "agent/plugins/prompt_perfect.py",
      "summary": "Модуль реализует инструмент оптимизации пользовательских промптов с помощью модели OpenAI. Он интегрируется в систему плагинов инструментов агента и предоставляет возможность улучшения формулировки запроса для повышения точности и качества ответов модели. Плагин использует асинхронный клиент OpenAI и поддерживает конфигурирование через переменные окружения или настройки."
    },
    {
      "name": "agent/plugins/auto_tts",
      "path": "modules/agent/plugins/auto_tts.md",
      "source_path": "agent/plugins/auto_tts.py",
      "summary": "Модуль реализует инструмент синтеза речи (TTS) через API OpenAI, интегрируемый в систему плагинов инструментов агента. Плагин генерирует аудиофайл из текста с поддержкой различных голосов, форматов и моделей. Результатом выполнения является путь к сохранённому временному аудиофайлу. Требуется наличие API-ключа OpenAI, заданного через переменную окружения или конфигурацию."
    },
    {
      "name": "agent/plugins/stable_diffusion",
      "path": "modules/agent/plugins/stable_diffusion.md",
      "source_path": "agent/plugins/stable_diffusion.py",
      "summary": "Модуль реализует инструмент генерации изображений по текстовому описанию с использованием Stable Diffusion через HuggingFace Inference API. Инструмент интегрируется в систему плагинов, предоставляя асинхронный интерфейс выполнения с поддержкой таймаутов и параллельного исполнения. Результатом работы является временный файл в формате PNG, путь к которому возвращается после успешной генерации."
    },
    {
      "name": "agent/plugins/use_cli",
      "path": "modules/agent/plugins/use_cli.md",
      "source_path": "agent/plugins/use_cli.py",
      "summary": "Модуль реализует плагин инструмента для делегирования сложных задач во внешний CLI-интерфейс (например, codex/gemini/claude code). Он позволяет передавать текст задачи в CLI через сессию, получать результат выполнения и возвращать его в структурированном виде."
    },
    {
      "name": "agent/plugins/reminders",
      "path": "modules/agent/plugins/reminders.md",
      "source_path": "agent/plugins/reminders.py",
      "summary": "Модуль предоставляет функциональность управления напоминаниями: создание, просмотр списка, удаление и отображение напоминаний через Telegram-интерфейс. Напоминания привязываются к пользователю и планируются во внутреннем хранилище задач с последующим уведомлением. Интегрирован с системой диалогов и обработки команд через callback-запросы. Ключевые структуры данных"
    },
    {
      "name": "agent/plugins/write_file",
      "path": "modules/agent/plugins/write_file.md",
      "source_path": "agent/plugins/write_file.py",
      "summary": "Модуль реализует инструмент для безопасной записи файлов в рамках рабочей области агента. Обеспечивает защиту от записи в чувствительные файлы, выхода за пределы рабочей директории и внедрения вредоносного кода."
    },
    {
      "name": "agent/plugins/search_files",
      "path": "modules/agent/plugins/search_files.md",
      "source_path": "agent/plugins/search_files.py",
      "summary": "Модуль предоставляет инструмент для поиска файлов в проекте с использованием glob-шаблонов. Позволяет безопасно исследовать структуру проекта, блокируя попытки выхода за пределы рабочей директории. Исключает файлы и директории, связанные с системами контроля версий и зависимостями (например, `.git`, `node_modules`)."
    },
    {
      "name": "agent/plugins/fetch_page",
      "path": "modules/agent/plugins/fetch_page.md",
      "source_path": "agent/plugins/fetch_page.py",
      "summary": "Модуль реализует инструмент для извлечения и парсинга веб-страниц по заданному URL. Инструмент возвращает содержимое страницы в виде чистого markdown-текста. Реализация делегирует непосредственную загрузку и обработку страницы вспомогательным функциям. Уровень риска использования инструмента — средний."
    },
    {
      "name": "agent/plugins/website_content",
      "path": "modules/agent/plugins/website_content.md",
      "source_path": "agent/plugins/website_content.py",
      "summary": "Модуль предоставляет инструмент для извлечения и очистки основного текстового содержимого веб-страницы по заданному URL. Использует внешний сервис r.jina.ai для эффективного извлечения чистого текста без необходимости парсить HTML вручную."
    },
    {
      "name": "agent/plugins/youtube_transcript",
      "path": "modules/agent/plugins/youtube_transcript.md",
      "source_path": "agent/plugins/youtube_transcript.py",
      "summary": "Модуль предоставляет инструмент для извлечения субтитров с YouTube-видео по его идентификатору. Поддерживается выбор приоритетных языков и автоматическое резервирование на доступные субтитры. Инструмент реализован как плагин `ToolPlugin` и использует библиотеку `youtube-transcript-api` в фоновом потоке."
    },
    {
      "name": "agent/plugins/web_research",
      "path": "modules/agent/plugins/web_research.md",
      "source_path": "agent/plugins/web_research.py",
      "summary": "Модуль WebResearchTool предназначен для выполнения семантического поиска релевантных веб-статей на основе пользовательского запроса. Поддерживает мультиязычный поиск (русский, английский, китайский), генерацию уточнённых поисковых запросов с помощью OpenAI, поиск через Jina AI Search API, а также загрузку, очистку и анализ содержимого страниц. Реализованы механизмы обработки ошибок, дедупликации и fallback-перехода между методами извлечения контента."
    },
    {
      "name": "agent/plugins/schedule_task",
      "path": "modules/agent/plugins/schedule_task.md",
      "source_path": "agent/plugins/schedule_task.py",
      "summary": "Инструмент для планирования задач, напоминаний и отложенного выполнения команд. Позволяет пользователям создавать, просматривать и отменять задачи с задержкой до 24 часов. Поддерживает до 5 задач на пользователя. Задачи могут быть напоминаниями или выполнением shell-команд."
    },
    {
      "name": "agent/plugins/memory",
      "path": "modules/agent/plugins/memory.md",
      "source_path": "agent/plugins/memory.py",
      "summary": "Модуль реализует инструмент долговременной памяти для агента, позволяющий сохранять, читать и очищать текстовые записи с автоматическим добавлением временных меток. Данные хранятся в файле на диске и сохраняются между сессиями. Инструмент интегрируется в Telegram-интерфейс через меню и команды, поддерживает диалоговый ввод и может вызываться через API агента."
    },
    {
      "name": "agent/plugins/chief",
      "path": "modules/agent/plugins/chief.md",
      "source_path": "agent/plugins/chief.py",
      "summary": "Модуль предоставляет инструмент для поиска рецептов через API Edamam на основе заданных ингредиентов или кулинарных запросов. Реализует интерфейс `ToolPlugin` и позволяет асинхронно выполнять запросы к внешнему сервису, возвращая отформатированный результат."
    },
    {
      "name": "agent/plugins/manage_tasks",
      "path": "modules/agent/plugins/manage_tasks.md",
      "source_path": "agent/plugins/manage_tasks.py",
      "summary": "Модуль предоставляет инструмент для управления списком задач в рамках сессии. Поддерживает операции добавления, обновления статуса, отображения и очистки завершённых задач. Используется для планирования и отслеживания многошаговых рабочих процессов агента."
    },
    {
      "name": "agent/plugins/gtts_text_to_speech",
      "path": "modules/agent/plugins/gtts_text_to_speech.md",
      "source_path": "agent/plugins/gtts_text_to_speech.py",
      "summary": "Модуль реализует инструмент преобразования текста в речь с использованием Google Text-to-Speech (gTTS) через плагин `ToolPlugin`. Позволяет асинхронно генерировать аудиофайлы в формате MP3 из текста на заданном языке и возвращает путь к сохранённому файлу."
    },
    {
      "name": "agent/mcp/http_client",
      "path": "modules/agent/mcp/http_client.md",
      "source_path": "agent/mcp/http_client.py",
      "summary": "HTTP-клиент для асинхронного взаимодействия с MCP (Model Control Protocol) по протоколу JSON-RPC 2.0. Поддерживает инициализацию сессии, вызов инструментов и получение списка доступных инструментов."
    },
    {
      "name": "agent/mcp/stdio_client",
      "path": "modules/agent/mcp/stdio_client.md",
      "source_path": "agent/mcp/stdio_client.py",
      "summary": "Клиент для взаимодействия с MCP (Model Control Protocol) сервером через стандартные потоки ввода-вывода. Позволяет запускать внешний процесс MCP-сервера, управлять им и вызывать инструменты (tools) через JSON-RPC."
    },
    {
      "name": "agent/mcp/jsonrpc",
      "path": "modules/agent/mcp/jsonrpc.md",
      "source_path": "agent/mcp/jsonrpc.py",
      "summary": "/** * @brief Модуль предоставляет инструменты для работы с JSON-RPC сообщениями, передаваемыми по потоку в рамках двух распространённых форматов фрейминга: LSP-совместимый (на основе заголовка Content-Length) и NDJSON (по одному JSON-объекту на строку). Основной класс `JsonRpcStream` инкапсулирует асинхронное чтение и запись сообщений, обеспечивая прозрачную поддержку обоих форматов. Используется для реализации клиентов или серверов, взаимодействующих по протоколам, основанным на JSON-RPC, таким как Language Server Protocol."
    },
    {
      "name": "agent/mcp/__init__",
      "path": "modules/agent/mcp/__init__.md",
      "source_path": "agent/mcp/__init__.py",
      "summary": "Модуль обеспечивает интеграцию с внешними инструментальными серверами через протокол MCP (Model Communication Protocol). Позволяет обнаруживать, подключаться к MCP-серверам и выполнять вызовы инструментов (tools) в синхронном и асинхронном режимах. Поддерживает динамическое получение манифеста инструментов и валидацию входных/выходных данных согласно схемам."
    },
    {
      "name": "agent/mcp/manager",
      "path": "modules/agent/mcp/manager.md",
      "source_path": "agent/mcp/manager.py",
      "summary": "MCPManager управляет клиентами MCP (Model Control Protocol), обеспечивая инициализацию, кэширование инструментов и вызов методов через различные транспортные протоколы (stdio, http). Он поддерживает загрузку и сохранение кэша инструментов между сессиями, а также абстрагирует различия в транспорте для единообразного взаимодействия с серверами."
    }
  ],
  "configs": [
    {
      "name": "toolhelp.json",
      "path": "configs/files/toolhelp__json.md",
      "source_path": "toolhelp.json",
      "summary": "Файл содержит справочную информацию о доступных slash-командах для различных инструментов искусственного интеллекта, используемых в CLI-режиме. Каждая запись соответствует конкретному инструменту и включает его название, тип, описание доступных команд и время последнего обновления. Описание команд ориентировано на пользователей, взаимодействующих с интерфейсом через текстовый ввод. Предназначен для быстрого ознакомления с функциональными возможностями и навигацией в рамках соответствующего CLI-инструмента."
    },
    {
      "name": "config_example.yaml",
      "path": "configs/files/config_example__yaml.md",
      "source_path": "config_example.yaml",
      "summary": "Конфигурационный файл задаёт параметры работы Telegram-бота для взаимодействия с различными языковыми моделями. Включает настройки аутентификации, команды запуска инструментов, переменные окружения, пути к файлам, поведение бота и поддержку нескольких LLM-провайдеров. Поддерживается интеграция с внешними MCP-серверами и использование пресетов для упрощения запуска типовых задач."
    },
    {
      "name": "agent/approvals/blocked-patterns.json",
      "path": "configs/files/agent/approvals/blocked-patterns__json.md",
      "source_path": "agent/approvals/blocked-patterns.json",
      "summary": "Конфигурационный файл предназначен для определения правил блокировки потенциально опасных команд и выражений в системе с целью предотвращения утечек данных, несанкционированного доступа, выполнения вредоносного кода и других угроз безопасности. Правила основаны на регулярных выражениях и сопровождаются метаданными, такими как категория угрозы и причина блокировки, что обеспечивает гибкое управление политиками безопасности и прозрачность срабатываний."
    }
  ],
  "files": [
    "_index.json",
    "architecture.md",
    "changes.md",
    "configs/files/agent/approvals/blocked-patterns__json.md",
    "configs/files/config_example__yaml.md",
    "configs/files/toolhelp__json.md",
    "configs/index.md",
    "conventions.md",
    "dependencies.md",
    "glossary.md",
    "index.md",
    "modules/agent/__init____py.md",
    "modules/agent/agent_core__py.md",
    "modules/agent/contracts__py.md",
    "modules/agent/dispatcher__py.md",
    "modules/agent/executor__py.md",
    "modules/agent/heuristics__py.md",
    "modules/agent/mcp/__init____py.md",
    "modules/agent/mcp/http_client__py.md",
    "modules/agent/mcp/jsonrpc__py.md",
    "modules/agent/mcp/manager__py.md",
    "modules/agent/mcp/stdio_client__py.md",
    "modules/agent/memory_policy__py.md",
    "modules/agent/memory_store__py.md",
    "modules/agent/openai_client__py.md",
    "modules/agent/orchestrator__py.md",
    "modules/agent/planner__py.md",
    "modules/agent/plugins/__init____py.md",
    "modules/agent/plugins/ask_user__py.md",
    "modules/agent/plugins/auto_tts__py.md",
    "modules/agent/plugins/base__py.md",
    "modules/agent/plugins/chief__py.md",
    "modules/agent/plugins/codeinterpreter__py.md",
    "modules/agent/plugins/ddg_image_search__py.md",
    "modules/agent/plugins/delete_file__py.md",
    "modules/agent/plugins/edit_file__py.md",
    "modules/agent/plugins/fetch_page__py.md",
    "modules/agent/plugins/github_analysis__py.md",
    "modules/agent/plugins/gtts_text_to_speech__py.md",
    "modules/agent/plugins/haiper_image_to_video__py.md",
    "modules/agent/plugins/list_directory__py.md",
    "modules/agent/plugins/manage_message__py.md",
    "modules/agent/plugins/manage_tasks__py.md",
    "modules/agent/plugins/memory__py.md",
    "modules/agent/plugins/movie_info__py.md",
    "modules/agent/plugins/prompt_perfect__py.md",
    "modules/agent/plugins/read_file__py.md",
    "modules/agent/plugins/reminders__py.md",
    "modules/agent/plugins/run_command__py.md",
    "modules/agent/plugins/schedule_task__py.md",
    "modules/agent/plugins/search_files__py.md",
    "modules/agent/plugins/search_text__py.md",
    "modules/agent/plugins/search_web__py.md",
    "modules/agent/plugins/send_file__py.md",
    "modules/agent/plugins/show_me_diagrams__py.md",
    "modules/agent/plugins/stable_diffusion__py.md",
    "modules/agent/plugins/task_management__py.md",
    "modules/agent/plugins/text_document_qa__py.md",
    "modules/agent/plugins/use_cli__py.md",
    "modules/agent/plugins/web_research__py.md",
    "modules/agent/plugins/website_content__py.md",
    "modules/agent/plugins/wolfram_alpha__py.md",
    "modules/agent/plugins/write_file__py.md",
    "modules/agent/plugins/youtube_transcript__py.md",
    "modules/agent/profiles__py.md",
    "modules/agent/session_store__py.md",
    "modules/agent/tooling/__init____py.md",
    "modules/agent/tooling/constants__py.md",
    "modules/agent/tooling/helpers__py.md",
    "modules/agent/tooling/loader__py.md",
    "modules/agent/tooling/mcp_plugin__py.md",
    "modules/agent/tooling/registry__py.md",
    "modules/agent/tooling/spec__py.md",
    "modules/command_registry__py.md",
    "modules/config__py.md",
    "modules/dirs_ui__py.md",
    "modules/git_ops__py.md",
    "modules/index.md",
    "modules/mcp_bridge__py.md",
    "modules/metrics__py.md",
    "modules/session__py.md",
    "modules/session_ui__py.md",
    "modules/state__py.md",
    "modules/summary__py.md",
    "modules/toolhelp__py.md",
    "modules/utils__py.md",
    "overview.md",
    "runtime.md",
    "testing.md"
  ],
  "generated_at": "2026-02-06T16:15:20.382834Z",
  "docs_dir": ".ai-docs",
  "rules": {
    "priority": [
      "modules/index.md",
      "modules/*",
      "configs/index.md",
      "configs/files/*",
      "index.md",
      "architecture.md",
      "conventions.md"
    ],
    "ranking": "keyword frequency + file priority",
    "usage": "use this index to choose a narrow route before reading full docs"
  }
}
